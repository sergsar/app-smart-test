"use strict";(self.webpackChunkapp_smart_test=self.webpackChunkapp_smart_test||[]).push([[1],{9001:(Ye,D,u)=>{u.r(D),u.d(D,{CharacterListModule:()=>Ue});var e=u(4893),W=u(7579),Ct=u(1135),x=u(262),g=u(9646),Ot=u(4408);const tt=new(u(640).v)(Ot.o),St=tt;var Pt=u(8306),Mt=u(3532);var Tt=u(4482),bt=u(5403),At=u(8421),Ft=u(5032),h=u(4004);class ${constructor(s,t){this.cellsCount=s,this.rowsCount=t,this.cellWidth=`${Math.floor(100/this.cellsCount)}%`}}var S=u(3088),O=u(3900),P=u(9300),C=u(4394),o=u(1174);const b="marvel-api",J=function Et(i){return s=>`${i} ${s}`}("[MARVEL CHARACTERS]"),U=(0,o.PH)(J("Load marvel characters success"),(0,o.Ky)()),j=(0,o.PH)(J("Load marvel characters failure"),(0,o.Ky)()),et=(0,o.PH)(J("Load marvel characters"),(0,o.Ky)()),it=(0,o.PH)(J("Load marvel character"),(0,o.Ky)()),$t=(0,o.Lq)({state:"pending"},(0,o.on)(U,(i,s)=>Object.assign({state:"ready"},s)),(0,o.on)(j,i=>({state:"error"}))),H=function Ut(i){return s=>`${i} ${s}`}("[MARVEL COMICS]"),R=(0,o.PH)(H("Load marvel character comics success"),(0,o.Ky)()),nt=(0,o.PH)(H("Load marvel character comics failure"),(0,o.Ky)()),st=(0,o.PH)(H("Load marvel character comics"),(0,o.Ky)()),Nt=(0,o.Lq)({state:"pending"},(0,o.on)(R,(i,s)=>Object.assign({state:"ready"},s)),(0,o.on)(nt,i=>({state:"error"}))),K=function Jt(i){return s=>`${i} ${s}`}("[MARVEL EVENTS]"),z=(0,o.PH)(K("Load marvel character events success"),(0,o.Ky)()),rt=(0,o.PH)(K("Load marvel character events failure"),(0,o.Ky)()),ot=(0,o.PH)(K("Load marvel character events"),(0,o.Ky)()),jt=(0,o.Lq)({state:"pending"},(0,o.on)(z,(i,s)=>Object.assign({state:"ready"},s)),(0,o.on)(rt,i=>({state:"error"}))),k=function Ht(i){return s=>`${i} ${s}`}("[MARVEL SERIES]"),G=(0,o.PH)(k("Load marvel character series success"),(0,o.Ky)()),ct=(0,o.PH)(k("Load marvel character series failure"),(0,o.Ky)()),at=(0,o.PH)(k("Load marvel character series"),(0,o.Ky)()),Kt=(0,o.Lq)({state:"pending"},(0,o.on)(G,(i,s)=>Object.assign({state:"ready"},s)),(0,o.on)(ct,i=>({state:"error"}))),B=function zt(i){return s=>`${i} ${s}`}("[MARVEL STORIES]"),q=(0,o.PH)(B("Load marvel character stories success"),(0,o.Ky)()),lt=(0,o.PH)(B("Load marvel character stories failure"),(0,o.Ky)()),ht=(0,o.PH)(B("Load marvel character stories"),(0,o.Ky)()),Gt=(0,o.Lq)({state:"pending"},(0,o.on)(q,(i,s)=>Object.assign({state:"ready"},s)),(0,o.on)(lt,i=>({state:"error"}))),Bt=new e.OlP("Marvel Api",{factory:()=>({characters:$t,comics:Nt,events:jt,series:Kt,stories:Gt})});var A=u(655),F=u(590);const V=(0,o.P1)(i=>i[b],i=>i.characters),Z="https://gateway.marvel.com/v1/public";var Dt=u(520);let Y=(()=>{class i{constructor(t){this.http=t}getCharacters(t){return this.http.get(`${Z}/characters`,{params:Object.assign(Object.assign({},this.getAuthParams()),this.processParams(t))})}getCharacter(t){return this.http.get(`${Z}/characters/${t}`,{params:Object.assign({},this.getAuthParams())})}getComics(t,n){return this.http.get(`${Z}/characters/${t}/comics`,{params:Object.assign(Object.assign({},this.getAuthParams()),this.processParams(n))})}getStories(t,n){return this.http.get(`${Z}/characters/${t}/stories`,{params:Object.assign(Object.assign({},this.getAuthParams()),this.processParams(n))})}getEvents(t,n){return this.http.get(`${Z}/characters/${t}/events`,{params:Object.assign(Object.assign({},this.getAuthParams()),this.processParams(n))})}getSeries(t,n){return this.http.get(`${Z}/characters/${t}/series`,{params:Object.assign(Object.assign({},this.getAuthParams()),this.processParams(n))})}getAuthParams(){return{ts:"1",apikey:"2640683be73eca0f74efa9274a6059d7",hash:"4800ef0902736d1b8ec875e409e093a1"}}processParams(t){if(!t)return t;let n={};return Object.keys(t).forEach(r=>{void 0!==t[r]&&(n[r]=t[r])}),n}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Dt.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class M{constructor(s,t,n){this.actions=s,this.store=t,this.marvelApiService=n,this.characters=this.actions.pipe((0,C.l4)(et),(0,O.w)(r=>this.store.select(V).pipe((0,F.P)(),(0,O.w)(c=>{var a,m;const f=r.offset||0,v=r.limit||(null===(a=this.cache)||void 0===a?void 0:a.length);return((null===(m=this.cache)||void 0===m?void 0:m.slice(f,f+v).filter(Boolean))||[]).length===v?(0,g.of)(U({summary:this.summary,single:c.single})):this.getCharacters(r.offset,r.limit).pipe((0,h.U)(d=>{this.cache=this.cache?[...this.cache]:new Array(d.total);for(let p=0;p<d.count;p++)this.cache[d.offset+p]=d.results[p];return this.summary=this.cache.filter(Boolean),U({summary:this.cache.filter(Boolean),single:c.single})}),(0,x.K)(d=>(console.error(d),(0,g.of)(j({error:d})))))})))),this.character=this.actions.pipe((0,C.l4)(it),(0,O.w)(r=>this.store.select(V).pipe((0,F.P)(),(0,O.w)(c=>{var a,m;const f=(null===(a=c.single)||void 0===a?void 0:a.find(v=>v.id===r.id))||(null===(m=c.summary)||void 0===m?void 0:m.find(v=>v.id===r.id));if(f){const v=[...c.single||[],f];return(0,g.of)(U({summary:this.summary,single:v}))}return this.getCharacter(r.id).pipe((0,h.U)(v=>{const l=[...c.single||[],...v.results];return U({summary:this.summary,single:l})}),(0,x.K)(v=>(console.error(v),(0,g.of)(j({error:v})))))}))))}getCharacters(s,t){return this.marvelApiService.getCharacters({offset:s,limit:t}).pipe((0,h.U)(n=>n.data))}getCharacter(s){return this.marvelApiService.getCharacter(s).pipe((0,h.U)(t=>t.data))}}M.\u0275fac=function(s){return new(s||M)(e.LFG(C.eX),e.LFG(o.yh),e.LFG(Y))},M.\u0275prov=e.Yz7({token:M,factory:M.\u0275fac}),(0,A.gn)([(0,C.Qm)()],M.prototype,"characters",void 0),(0,A.gn)([(0,C.Qm)()],M.prototype,"character",void 0);const mt=(0,o.P1)(i=>i[b],i=>i.comics);class L{constructor(s,t,n){this.actions=s,this.store=t,this.marvelApiService=n,this.comics=this.actions.pipe((0,C.l4)(st),(0,O.w)(r=>this.store.select(mt).pipe((0,F.P)(),(0,O.w)(c=>{const a=this.cache&&this.cache[r.id]||[],m=r.offset||0,f=r.limit||a.length;return((null==a?void 0:a.slice(m,m+f).filter(Boolean))||[]).length===f?(0,g.of)(R({summary:this.summary})):this.getComics(r.id,r.offset,r.limit).pipe((0,h.U)(l=>{const d=this.cache&&this.cache[r.id]||new Array(l.total);for(let p=0;p<l.count;p++)d[l.offset+p]=l.results[p];return this.summary=Object.assign(Object.assign({},this.summary),{[r.id]:d.filter(Boolean)}),R({summary:this.summary})}),(0,x.K)(l=>(console.error(l),(0,g.of)(nt({error:l})))))}))))}getComics(s,t,n){return this.marvelApiService.getComics(s,{offset:t,limit:n}).pipe((0,h.U)(r=>r.data))}}L.\u0275fac=function(s){return new(s||L)(e.LFG(C.eX),e.LFG(o.yh),e.LFG(Y))},L.\u0275prov=e.Yz7({token:L,factory:L.\u0275fac}),(0,A.gn)([(0,C.Qm)()],L.prototype,"comics",void 0);const ut=(0,o.P1)(i=>i[b],i=>i.events);class y{constructor(s,t,n){this.actions=s,this.store=t,this.marvelApiService=n,this.events=this.actions.pipe((0,C.l4)(ot),(0,O.w)(r=>this.store.select(ut).pipe((0,F.P)(),(0,O.w)(c=>{const a=this.cache&&this.cache[r.id]||[],m=r.offset||0,f=r.limit||a.length;return((null==a?void 0:a.slice(m,m+f).filter(Boolean))||[]).length===f?(0,g.of)(z({summary:this.summary})):this.getEvents(r.id,r.offset,r.limit).pipe((0,h.U)(l=>{const d=this.cache&&this.cache[r.id]||new Array(l.total);for(let p=0;p<l.count;p++)d[l.offset+p]=l.results[p];return this.summary=Object.assign(Object.assign({},c.summary),{[r.id]:d.filter(Boolean)}),z({summary:this.summary})}),(0,x.K)(l=>(console.error(l),(0,g.of)(rt({error:l})))))}))))}getEvents(s,t,n){return this.marvelApiService.getEvents(s,{offset:t,limit:n}).pipe((0,h.U)(r=>r.data))}}y.\u0275fac=function(s){return new(s||y)(e.LFG(C.eX),e.LFG(o.yh),e.LFG(Y))},y.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac}),(0,A.gn)([(0,C.Qm)()],y.prototype,"events",void 0);const dt=(0,o.P1)(i=>i[b],i=>i.stories);class w{constructor(s,t,n){this.actions=s,this.store=t,this.marvelApiService=n,this.stories=this.actions.pipe((0,C.l4)(ht),(0,O.w)(r=>this.store.select(dt).pipe((0,F.P)(),(0,O.w)(c=>{const a=this.cache&&this.cache[r.id]||[],m=r.offset||0,f=r.limit||a.length;return((null==a?void 0:a.slice(m,m+f).filter(Boolean))||[]).length===f?(0,g.of)(q({summary:this.summary})):this.getStories(r.id,r.offset,r.limit).pipe((0,h.U)(l=>{const d=this.cache&&this.cache[r.id]||new Array(l.total);for(let p=0;p<l.count;p++)d[l.offset+p]=l.results[p];return this.summary=Object.assign(Object.assign({},c.summary),{[r.id]:d.filter(Boolean)}),q({summary:this.summary})}),(0,x.K)(l=>(console.error(l),(0,g.of)(lt({error:l})))))}))))}getStories(s,t,n){return this.marvelApiService.getStories(s,{offset:t,limit:n}).pipe((0,h.U)(r=>r.data))}}w.\u0275fac=function(s){return new(s||w)(e.LFG(C.eX),e.LFG(o.yh),e.LFG(Y))},w.\u0275prov=e.Yz7({token:w,factory:w.\u0275fac}),(0,A.gn)([(0,C.Qm)()],w.prototype,"stories",void 0);const pt=(0,o.P1)(i=>i[b],i=>i.series);class T{constructor(s,t,n){this.actions=s,this.store=t,this.marvelApiService=n,this.series=this.actions.pipe((0,C.l4)(at),(0,O.w)(r=>this.store.select(pt).pipe((0,F.P)(),(0,O.w)(c=>{const a=this.cache&&this.cache[r.id]||[],m=r.offset||0,f=r.limit||a.length;return((null==a?void 0:a.slice(m,m+f).filter(Boolean))||[]).length===f?(0,g.of)(G({summary:this.summary})):this.getSeries(r.id,r.offset,r.limit).pipe((0,h.U)(l=>{const d=this.cache&&this.cache[r.id]||new Array(l.total);for(let p=0;p<l.count;p++)d[l.offset+p]=l.results[p];return this.summary=Object.assign(Object.assign({},c.summary),{[r.id]:d.filter(Boolean)}),G({summary:this.summary})}),(0,x.K)(l=>(console.error(l),(0,g.of)(ct({error:l})))))}))))}getSeries(s,t,n){return this.marvelApiService.getSeries(s,{offset:t,limit:n}).pipe((0,h.U)(r=>r.data))}}T.\u0275fac=function(s){return new(s||T)(e.LFG(C.eX),e.LFG(o.yh),e.LFG(Y))},T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac}),(0,A.gn)([(0,C.Qm)()],T.prototype,"series",void 0);let Wt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[C.sQ.forFeature([M,L,y,w,T]),o.Aw.forFeature(b,Bt)]]}),i})();function E(i,s){const t=[],n=Math.ceil(i.length/s.cellsCount);for(let r=0;r<n;r++){const c=s.cellsCount*r,a=i.slice(c,c+s.cellsCount),m=new Array(s.cellsCount);Object.assign(m,a),t[r]=m}return t}let X=(()=>{class i{constructor(t){this.store=t}getCharacter(t){return this.store.dispatch(it({id:t})),this.getStoreCharacter(t).pipe((0,h.U)(n=>this.convertToCharacter(n)))}getCharactersNext(t,n){let r=[];return n.pipe((0,O.w)(()=>(this.store.dispatch(et({offset:r.length,limit:3*t.cellsCount})),this.getStoreCharacters().pipe((0,h.U)(c=>(r=c,E(this.convertToCharacters(c),t))),(0,x.K)(c=>(console.error(c),(0,g.of)(E(this.convertToCharacters(r),t))))))))}getStoreCharacter(t){return this.getStoreCharactersState().pipe((0,h.U)(n=>{var r;return null===(r=n.single)||void 0===r?void 0:r.find(c=>c.id===t)}),(0,P.h)(n=>!!n))}getStoreCharacters(){return this.getStoreCharactersState().pipe((0,h.U)(t=>t.summary),(0,P.h)(t=>!!t))}getStoreCharactersState(){return this.store.select(V).pipe((0,P.h)(t=>"pending"!==t.state),(0,h.U)(t=>{if("error"===t.state)throw t.error;return t}))}convertToCharacters(t){return t.map(n=>this.convertToCharacter(n))}convertToCharacter(t){return{id:t.id,name:t.name,description:t.description,thumbnail:{extension:t.thumbnail.extension,path:t.thumbnail.path},comics:t.comics,events:t.events,series:t.series,stories:t.stories}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(o.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),I=(()=>{class i{get isPortrait(){return document.body.clientWidth/window.innerHeight<1}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var _=u(9808);function te(i,s){if(1&i&&(e.TgZ(0,"div",5)(1,"p"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.model?null:t.model.description)}}let ee=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-character-list-item"]],inputs:{model:"model"},decls:7,vars:3,consts:[[1,"container"],[1,"item","image"],["onerror","this.onerror=null; this.src='/assets/img/default-character.jpeg'",3,"src"],[1,"item","text","name"],["class","item text description",4,"ngIf"],[1,"item","text","description"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"p"),e._uU(5),e.qZA()(),e.YNc(6,te,3,1,"div",4),e.qZA()),2&t&&(e.xp6(2),e.Q6J("src",(null==n.model||null==n.model.thumbnail?null:n.model.thumbnail.path)+"/standard_fantastic."+(null==n.model||null==n.model.thumbnail?null:n.model.thumbnail.extension),e.LSH),e.xp6(3),e.Oqu(null==n.model?null:n.model.name),e.xp6(1),e.Q6J("ngIf",null==n.model?null:n.model.description))},directives:[_.O5],styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;align-items:stretch}[_nghost-%COMP%]   .item[_ngcontent-%COMP%]{color:#fff;display:flex}[_nghost-%COMP%]   .item.text[_ngcontent-%COMP%]{text-align:left;padding:0 16px;-webkit-box-orient:vertical;display:-webkit-box;text-overflow:ellipsis;-webkit-line-clamp:4}[_nghost-%COMP%]   .item.name[_ngcontent-%COMP%]{font-size:initial;min-height:7%}[_nghost-%COMP%]   .item.description[_ngcontent-%COMP%]{font-size:small;min-height:30%}[_nghost-%COMP%]   .item.image[_ngcontent-%COMP%]{height:60%;padding:8px}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;align-self:start}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{width:100%;object-fit:cover;object-position:top}"],changeDetection:0}),i})();const ie=["list"];function ne(i,s){if(1&i&&e._UZ(0,"marvel-character-list-item",12),2&i){const t=e.oxw().$implicit;e.Q6J("model",t)}}function se(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(3).click(c.id)}),e.YNc(1,ne,1,1,"marvel-character-list-item",11),e.qZA()}if(2&i){const t=s.$implicit,n=e.oxw(3);e.Udp("width",n.dimensions.cellWidth),e.xp6(1),e.Q6J("ngIf",t)}}function re(i,s){if(1&i&&(e.TgZ(0,"div",8),e.YNc(1,se,2,3,"div",9),e.qZA()),2&i){const t=s.$implicit;e.Udp("max-height","1000px"),e.xp6(1),e.Q6J("ngForOf",t)}}function oe(i,s){if(1&i&&(e.TgZ(0,"div",5,6),e.YNc(2,re,2,3,"div",7),e.qZA()),2&i){const t=s.ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}let ce=(()=>{class i{constructor(t,n,r,c){this.router=t,this.route=n,this.characterListService=r,this.viewportInfoService=c,this.destroy$=new W.x,this.loadNextCharacters$=new Ct.X(void 0);const a=c.isPortrait;this.dimensions=new $(a?1:4,a?2:1),this.model$=this.characterListService.getCharactersNext(this.dimensions,this.loadNextCharacters$).pipe((0,x.K)(m=>(console.error(m),(0,g.of)([])))),function wt(i=0,s=tt){return i<0&&(i=0),function yt(i=0,s,t=St){let n=-1;return null!=s&&((0,Mt.K)(s)?t=s:n=s),new Pt.y(r=>{let c=function Lt(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;c<0&&(c=0);let a=0;return t.schedule(function(){r.closed||(r.next(a++),0<=n?this.schedule(void 0,n):r.complete())},c)})}(i,i,s)}(0).pipe(function Zt(i){return(0,Tt.e)((s,t)=>{(0,At.Xf)(i).subscribe((0,bt.x)(t,()=>t.complete(),Ft.Z)),!t.closed&&s.subscribe(t)})}(this.destroy$),(0,h.U)(()=>{var m,f;if(!(null===(m=this.list)||void 0===m?void 0:m.nativeElement))return;const v=null===(f=this.list)||void 0===f?void 0:f.nativeElement,d=v.scrollHeight-v.clientHeight-v.scrollTop<100;d&&!this.endScroll&&(this.endScroll=d,this.loadNextCharacters$.next()),d||(this.endScroll=d)})).subscribe()}ngOnDestroy(){this.destroy$.next()}click(t){this.router.navigate(["character",t],{relativeTo:this.route.parent})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.F0),e.Y36(S.gz),e.Y36(X),e.Y36(I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-character-list"]],viewQuery:function(t,n){if(1&t&&e.Gf(ie,5,e.SBq),2&t){let r;e.iGM(r=e.CRH())&&(n.list=r.first)}},decls:8,vars:3,consts:[[1,"header"],[1,"about"],[1,"item","text","name"],["href","https://developer.marvel.com"],["class","list",4,"ngIf"],[1,"list"],["list",""],["class","row",3,"max-height",4,"ngFor","ngForOf"],[1,"row"],["class","cell",3,"width","click",4,"ngFor","ngForOf"],[1,"cell",3,"click"],[3,"model",4,"ngIf"],[3,"model"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"The Marvel Api Test Application"),e.qZA(),e.TgZ(4,"a",3),e._uU(5,"developer.marvel.com"),e.qZA()()(),e.YNc(6,oe,3,1,"div",4),e.ALo(7,"async")),2&t&&(e.xp6(6),e.Q6J("ngIf",e.lcZ(7,1,n.model$)))},directives:[_.O5,_.sg,ee],pipes:[_.Ov],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{color:#fff;margin:12px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:link, [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:visited, [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:active{color:#fff}[_nghost-%COMP%]   .list[_ngcontent-%COMP%]{margin:1px;overflow:auto}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{border:1px solid lightgreen}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px}"],changeDetection:0}),i})(),ae=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-character-board"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[S.lC],styles:[""],changeDetection:0}),i})();var N=u(515);function le(i,s){if(1&i&&(e.TgZ(0,"div",12)(1,"p"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().ngIf;e.xp6(2),e.Oqu(null==t?null:t.description)}}function he(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).changeList("stories")}),e._uU(1,"Stories"),e.qZA()}if(2&i){const t=e.oxw(2);e.ekj("selected","stories"===t.tab)}}function me(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).changeList("events")}),e._uU(1,"Events"),e.qZA()}if(2&i){const t=e.oxw(2);e.ekj("selected","events"===t.tab)}}function ue(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).changeList("series")}),e._uU(1,"Series"),e.qZA()}if(2&i){const t=e.oxw(2);e.ekj("selected","series"===t.tab)}}function de(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"img",2),e.NdJ("click",function(){return e.CHM(t),e.oxw().home()}),e.qZA(),e.TgZ(2,"div",3),e._UZ(3,"img",4),e.TgZ(4,"div",5)(5,"h1",6),e._uU(6),e.qZA(),e.YNc(7,le,3,1,"div",7),e.TgZ(8,"div",8)(9,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeList("comics")}),e._uU(10,"Comics"),e.qZA(),e.YNc(11,he,2,2,"button",10),e.YNc(12,me,2,2,"button",10),e.YNc(13,ue,2,2,"button",10),e.qZA()()(),e.TgZ(14,"div",11),e._UZ(15,"router-outlet"),e.qZA()()}if(2&i){const t=s.ngIf,n=e.oxw();e.xp6(3),e.Q6J("src",(null==t||null==t.thumbnail?null:t.thumbnail.path)+"/standard_medium."+(null==t||null==t.thumbnail?null:t.thumbnail.extension),e.LSH),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",null==t?null:t.description),e.xp6(2),e.ekj("selected","comics"===n.tab),e.xp6(2),e.Q6J("ngIf",null==t||null==t.stories||null==t.stories.items?null:t.stories.items.length),e.xp6(1),e.Q6J("ngIf",null==t||null==t.events||null==t.events.items?null:t.events.items.length),e.xp6(1),e.Q6J("ngIf",null==t||null==t.series||null==t.series.items?null:t.series.items.length)}}let pe=(()=>{class i{constructor(t,n,r){this.route=t,this.router=n,this.characterListService=r,this.model$=N.E,this.destroy$=new W.x}get tab(){var t,n;return null===(n=null===(t=this.route.firstChild)||void 0===t?void 0:t.snapshot)||void 0===n?void 0:n.url[0].path}ngOnInit(){this.id=+this.route.snapshot.paramMap.get("id"),this.model$=this.characterListService.getCharacter(this.id)}ngOnDestroy(){this.destroy$.next()}changeList(t){this.router.navigate([t],{relativeTo:this.route})}home(){this.router.navigate([""])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.gz),e.Y36(S.F0),e.Y36(X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-character"]],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],["src","/assets/img/home-icon.jpeg",1,"item","home",3,"click"],[1,"header"],["onerror","this.onerror=null; this.src='/assets/img/default-character.jpeg'",1,"item",3,"src"],[1,"about"],[1,"item","text","name"],["class","item text description",4,"ngIf"],[1,"buttons"],[1,"button",3,"click"],["class","button",3,"selected","click",4,"ngIf"],[1,"list"],[1,"item","text","description"]],template:function(t,n){1&t&&(e.YNc(0,de,16,8,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.model$))},directives:[_.O5,S.lC],pipes:[_.Ov],styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{color:#fff;display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:12px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:8px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-top:0;margin-bottom:auto}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:small;width:100%}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{align-self:start;height:60%;object-fit:cover;object-position:top}[_nghost-%COMP%]   .home[_ngcontent-%COMP%]{width:25px;height:25px;top:0;right:0;position:absolute;margin:8px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:1px solid lightgreen}[_nghost-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff;padding:8px;text-align:center;border-radius:12px;box-shadow:0 0 3px gray;margin-right:8px}[_nghost-%COMP%]   .list[_ngcontent-%COMP%]{overflow:auto;flex-grow:1}"]}),i})(),gt=(()=>{class i{constructor(t){this.store=t}getCharacterComicsNext(t,n,r){let c=[];return r.pipe((0,O.w)(()=>(this.store.dispatch(st({offset:c.length,limit:3*n.cellsCount,id:t})),this.getStoreComics(t).pipe((0,h.U)(a=>(c=a,E(this.convertToComics(a),n)))))))}getStoreComics(t){return this.getStoreComicsState().pipe((0,h.U)(n=>n.summary[t]),(0,P.h)(n=>!!n))}getStoreComicsState(){return this.store.select(mt).pipe((0,P.h)(t=>"pending"!==t.state),(0,h.U)(t=>{if("error"===t.state)throw t.error;return t}))}convertToComics(t){return t.map(n=>({id:n.id,title:n.title,description:n.description,thumbnail:n.thumbnail}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(o.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();function ge(i,s){if(1&i&&(e.TgZ(0,"div",5),e._UZ(1,"div",6),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("innerHTML",null==t.model?null:t.model.description,e.oJD)}}let Q=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-comics-list-item"]],inputs:{model:"model"},decls:7,vars:3,consts:[[1,"container"],[1,"item","image"],["onerror","this.onerror=null; this.src='/assets/img/default-comics.jpeg'",3,"src"],[1,"item","text","title"],["class","item text description",4,"ngIf"],[1,"item","text","description"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"p"),e._uU(5),e.qZA()(),e.YNc(6,ge,2,1,"div",4),e.qZA()),2&t&&(e.xp6(2),e.Q6J("src",(null==n.model||null==n.model.thumbnail?null:n.model.thumbnail.path)+"/landscape_xlarge."+(null==n.model||null==n.model.thumbnail?null:n.model.thumbnail.extension),e.LSH),e.xp6(3),e.Oqu(null==n.model?null:n.model.title),e.xp6(1),e.Q6J("ngIf",null==n.model?null:n.model.description))},directives:[_.O5],styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;align-items:stretch}[_nghost-%COMP%]   .item[_ngcontent-%COMP%]{color:#fff;display:flex}[_nghost-%COMP%]   .item.text[_ngcontent-%COMP%]{text-align:left;padding:0 16px;-webkit-box-orient:vertical;display:-webkit-box;text-overflow:ellipsis;-webkit-line-clamp:4}[_nghost-%COMP%]   .item.title[_ngcontent-%COMP%]{font-size:initial;min-height:7%}[_nghost-%COMP%]   .item.description[_ngcontent-%COMP%]{font-size:small;min-height:70%}[_nghost-%COMP%]   .item.image[_ngcontent-%COMP%]{height:60%;padding:8px}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;align-self:start}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{width:100%;object-fit:cover;object-position:top}"],changeDetection:0}),i})();function fe(i,s){if(1&i&&e._UZ(0,"marvel-comics-list-item",8),2&i){const t=e.oxw().$implicit;e.Q6J("model",t)}}function ve(i,s){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,fe,1,1,"marvel-comics-list-item",7),e.qZA()),2&i){const t=s.$implicit,n=e.oxw(3);e.Udp("width",n.dimensions.cellWidth),e.xp6(1),e.Q6J("ngIf",t)}}function _e(i,s){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,ve,2,3,"div",5),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Ce(i,s){if(1&i&&(e.TgZ(0,"div",1,2),e.YNc(2,_e,2,1,"div",3),e.qZA()),2&i){const t=s.ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}let Oe=(()=>{class i{constructor(t,n,r){var c;this.viewportInfoService=t,this.comicsListService=n,this.activatedRoute=r,this.model$=N.E;const a=t.isPortrait;this.dimensions=new $(a?1:4,a?2:1),this.characterId=+(null===(c=this.activatedRoute.parent)||void 0===c?void 0:c.snapshot.paramMap.get("id"))}ngOnInit(){this.model$=this.comicsListService.getCharacterComicsNext(this.characterId,this.dimensions,(0,g.of)(void 0)).pipe((0,x.K)(t=>(console.error(t),(0,g.of)([]))))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I),e.Y36(gt),e.Y36(S.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-comics-list"]],decls:2,vars:3,consts:[["class","list",4,"ngIf"],[1,"list"],["list",""],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","cell",3,"width",4,"ngFor","ngForOf"],[1,"cell"],[3,"model",4,"ngIf"],[3,"model"]],template:function(t,n){1&t&&(e.YNc(0,Ce,3,1,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.model$))},directives:[_.O5,_.sg,Q],pipes:[_.Ov],styles:["[_nghost-%COMP%]   .list[_ngcontent-%COMP%]{margin:1px}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px}"]}),i})(),ft=(()=>{class i{constructor(t){this.store=t}getCharacterEventsNext(t,n,r){let c=[];return r.pipe((0,O.w)(()=>(this.store.dispatch(ot({offset:c.length,limit:3*n.cellsCount,id:t})),this.getStoreEvents(t).pipe((0,h.U)(a=>(c=a,E(this.convertToEvent(a),n)))))))}getStoreEvents(t){return this.getStoreEventsState().pipe((0,h.U)(n=>n.summary[t]),(0,P.h)(n=>!!n))}getStoreEventsState(){return this.store.select(ut).pipe((0,P.h)(t=>"pending"!==t.state),(0,h.U)(t=>{if("error"===t.state)throw t.error;return t}))}convertToEvent(t){return t.map(n=>({id:n.id,title:n.title,description:n.description,thumbnail:n.thumbnail}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(o.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();function xe(i,s){if(1&i&&e._UZ(0,"marvel-comics-list-item",8),2&i){const t=e.oxw().$implicit;e.Q6J("model",t)}}function Se(i,s){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,xe,1,1,"marvel-comics-list-item",7),e.qZA()),2&i){const t=s.$implicit,n=e.oxw(3);e.Udp("width",n.dimensions.cellWidth),e.xp6(1),e.Q6J("ngIf",t)}}function Pe(i,s){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,Se,2,3,"div",5),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Me(i,s){if(1&i&&(e.TgZ(0,"div",1,2),e.YNc(2,Pe,2,1,"div",3),e.qZA()),2&i){const t=s.ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}let Le=(()=>{class i{constructor(t,n,r){var c;this.viewportInfoService=t,this.eventsListService=n,this.activatedRoute=r,this.model$=N.E;const a=t.isPortrait;this.dimensions=new $(a?1:4,a?2:1),this.characterId=+(null===(c=this.activatedRoute.parent)||void 0===c?void 0:c.snapshot.paramMap.get("id"))}ngOnInit(){this.model$=this.eventsListService.getCharacterEventsNext(this.characterId,this.dimensions,(0,g.of)(void 0)).pipe((0,x.K)(t=>(console.error(t),(0,g.of)([]))))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I),e.Y36(ft),e.Y36(S.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-events-list"]],decls:2,vars:3,consts:[["class","list",4,"ngIf"],[1,"list"],["list",""],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","cell",3,"width",4,"ngFor","ngForOf"],[1,"cell"],[3,"model",4,"ngIf"],[3,"model"]],template:function(t,n){1&t&&(e.YNc(0,Me,3,1,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.model$))},directives:[_.O5,_.sg,Q],pipes:[_.Ov],styles:["[_nghost-%COMP%]   .list[_ngcontent-%COMP%]{margin:1px}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px}"]}),i})(),vt=(()=>{class i{constructor(t){this.store=t}getCharacterStoriesNext(t,n,r){let c=[];return r.pipe((0,O.w)(()=>(this.store.dispatch(ht({offset:c.length,limit:3*n.cellsCount,id:t})),this.getStoreStories(t).pipe((0,h.U)(a=>(c=a,E(this.convertToStory(a),n)))))))}getStoreStories(t){return this.getStoreStoriesState().pipe((0,h.U)(n=>n.summary[t]),(0,P.h)(n=>!!n))}getStoreStoriesState(){return this.store.select(dt).pipe((0,P.h)(t=>"pending"!==t.state),(0,h.U)(t=>{if("error"===t.state)throw t.error;return t}))}convertToStory(t){return t.map(n=>({id:n.id,title:n.title,description:n.description,thumbnail:n.thumbnail}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(o.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),_t=(()=>{class i{constructor(t){this.store=t}getCharacterSeriesNext(t,n,r){let c=[];return r.pipe((0,O.w)(()=>(this.store.dispatch(at({offset:c.length,limit:3*n.cellsCount,id:t})),this.getStoreSeries(t).pipe((0,h.U)(a=>(c=a,E(this.convertToSeries(a),n)))))))}getStoreSeries(t){return this.getStoreSeriesState().pipe((0,h.U)(n=>n.summary[t]),(0,P.h)(n=>!!n))}getStoreSeriesState(){return this.store.select(pt).pipe((0,P.h)(t=>"pending"!==t.state),(0,h.U)(t=>{if("error"===t.state)throw t.error;return t}))}convertToSeries(t){return t.map(n=>({id:n.id,title:n.title,description:n.description,thumbnail:n.thumbnail}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(o.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();function ye(i,s){if(1&i&&e._UZ(0,"marvel-comics-list-item",8),2&i){const t=e.oxw().$implicit;e.Q6J("model",t)}}function we(i,s){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,ye,1,1,"marvel-comics-list-item",7),e.qZA()),2&i){const t=s.$implicit,n=e.oxw(3);e.Udp("width",n.dimensions.cellWidth),e.xp6(1),e.Q6J("ngIf",t)}}function Te(i,s){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,we,2,3,"div",5),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function be(i,s){if(1&i&&(e.TgZ(0,"div",1,2),e.YNc(2,Te,2,1,"div",3),e.qZA()),2&i){const t=s.ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}function Fe(i,s){if(1&i&&e._UZ(0,"marvel-comics-list-item",8),2&i){const t=e.oxw().$implicit;e.Q6J("model",t)}}function Ze(i,s){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,Fe,1,1,"marvel-comics-list-item",7),e.qZA()),2&i){const t=s.$implicit,n=e.oxw(3);e.Udp("width",n.dimensions.cellWidth),e.xp6(1),e.Q6J("ngIf",t)}}function Ee(i,s){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,Ze,2,3,"div",5),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Ie(i,s){if(1&i&&(e.TgZ(0,"div",1,2),e.YNc(2,Ee,2,1,"div",3),e.qZA()),2&i){const t=s.ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}const $e=[{path:"",component:ae,children:[{path:"character-list",component:ce},{path:"character/:id",component:pe,children:[{path:"comics",component:Oe},{path:"events",component:Le},{path:"series",component:(()=>{class i{constructor(t,n,r){var c;this.viewportInfoService=t,this.seriesListService=n,this.activatedRoute=r,this.model$=N.E;const a=t.isPortrait;this.dimensions=new $(a?1:4,a?2:1),this.characterId=+(null===(c=this.activatedRoute.parent)||void 0===c?void 0:c.snapshot.paramMap.get("id"))}ngOnInit(){this.model$=this.seriesListService.getCharacterSeriesNext(this.characterId,this.dimensions,(0,g.of)(void 0)).pipe((0,x.K)(t=>(console.error(t),(0,g.of)([]))))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I),e.Y36(_t),e.Y36(S.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-series-list"]],decls:2,vars:3,consts:[["class","list",4,"ngIf"],[1,"list"],["list",""],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","cell",3,"width",4,"ngFor","ngForOf"],[1,"cell"],[3,"model",4,"ngIf"],[3,"model"]],template:function(t,n){1&t&&(e.YNc(0,be,3,1,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.model$))},directives:[_.O5,_.sg,Q],pipes:[_.Ov],styles:["[_nghost-%COMP%]   .list[_ngcontent-%COMP%]{margin:1px}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px}"]}),i})()},{path:"stories",component:(()=>{class i{constructor(t,n,r){var c;this.viewportInfoService=t,this.storiesListService=n,this.activatedRoute=r,this.model$=N.E;const a=t.isPortrait;this.dimensions=new $(a?1:4,a?2:1),this.characterId=+(null===(c=this.activatedRoute.parent)||void 0===c?void 0:c.snapshot.paramMap.get("id"))}ngOnInit(){this.model$=this.storiesListService.getCharacterStoriesNext(this.characterId,this.dimensions,(0,g.of)(void 0)).pipe((0,x.K)(t=>(console.error(t),(0,g.of)([]))))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I),e.Y36(vt),e.Y36(S.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-stories-list"]],decls:2,vars:3,consts:[["class","list",4,"ngIf"],[1,"list"],["list",""],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","cell",3,"width",4,"ngFor","ngForOf"],[1,"cell"],[3,"model",4,"ngIf"],[3,"model"]],template:function(t,n){1&t&&(e.YNc(0,Ie,3,1,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.model$))},directives:[_.O5,_.sg,Q],pipes:[_.Ov],styles:["[_nghost-%COMP%]   .list[_ngcontent-%COMP%]{margin:1px}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px}"]}),i})()},{path:"**",pathMatch:"full",redirectTo:"comics"}]},{path:"**",pathMatch:"full",redirectTo:"character-list"}]}];let Ue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[X,I,gt,ft,vt,_t],imports:[[S.Bz.forChild($e),Wt,_.ez]]}),i})()}}]);
"use strict";(self.webpackChunkapp_smart_test=self.webpackChunkapp_smart_test||[]).push([[511],{4511:(Ye,D,u)=>{u.r(D),u.d(D,{CharacterListModule:()=>Ue});var S=u(3088),C=u(4394),o=u(1174);const b="marvel-api";var e=u(4893);const j=function Ct(i){return n=>`${i} ${n}`}("[MARVEL CHARACTERS]"),$=(0,o.PH)(j("Load marvel characters success"),(0,o.Ky)()),Q=(0,o.PH)(j("Load marvel characters failure"),(0,o.Ky)()),W=(0,o.PH)(j("Load marvel characters"),(0,o.Ky)()),tt=(0,o.PH)(j("Load marvel character"),(0,o.Ky)()),xt=(0,o.Lq)({state:"pending"},(0,o.on)($,(i,n)=>Object.assign({state:"ready"},n)),(0,o.on)(Q,(i,n)=>Object.assign({state:"error"},n))),H=function St(i){return n=>`${i} ${n}`}("[MARVEL COMICS]"),R=(0,o.PH)(H("Load marvel character comics success"),(0,o.Ky)()),et=(0,o.PH)(H("Load marvel character comics failure"),(0,o.Ky)()),it=(0,o.PH)(H("Load marvel character comics"),(0,o.Ky)()),Mt=(0,o.Lq)({state:"pending"},(0,o.on)(R,(i,n)=>Object.assign({state:"ready"},n)),(0,o.on)(et,(i,n)=>Object.assign({state:"error"},n))),K=function Lt(i){return n=>`${i} ${n}`}("[MARVEL EVENTS]"),z=(0,o.PH)(K("Load marvel character events success"),(0,o.Ky)()),nt=(0,o.PH)(K("Load marvel character events failure"),(0,o.Ky)()),st=(0,o.PH)(K("Load marvel character events"),(0,o.Ky)()),wt=(0,o.Lq)({state:"pending"},(0,o.on)(z,(i,n)=>Object.assign({state:"ready"},n)),(0,o.on)(nt,(i,n)=>Object.assign({state:"error"},n))),k=function Tt(i){return n=>`${i} ${n}`}("[MARVEL SERIES]"),G=(0,o.PH)(k("Load marvel character series success"),(0,o.Ky)()),rt=(0,o.PH)(k("Load marvel character series failure"),(0,o.Ky)()),ot=(0,o.PH)(k("Load marvel character series"),(0,o.Ky)()),At=(0,o.Lq)({state:"pending"},(0,o.on)(G,(i,n)=>Object.assign({state:"ready"},n)),(0,o.on)(rt,(i,n)=>Object.assign({state:"error"},n))),B=function Ft(i){return n=>`${i} ${n}`}("[MARVEL STORIES]"),q=(0,o.PH)(B("Load marvel character stories success"),(0,o.Ky)()),ct=(0,o.PH)(B("Load marvel character stories failure"),(0,o.Ky)()),at=(0,o.PH)(B("Load marvel character stories"),(0,o.Ky)()),Et=(0,o.Lq)({state:"pending"},(0,o.on)(q,(i,n)=>Object.assign({state:"ready"},n)),(0,o.on)(ct,(i,n)=>Object.assign({state:"error"},n))),It=new e.OlP("Marvel Api",{factory:()=>({characters:xt,comics:Mt,events:wt,series:At,stories:Et})});var A=u(655),O=u(3900),F=u(590),g=u(9646),h=u(4004),x=u(262);const V=(0,o.P1)(i=>i[b],i=>i.characters),Z="https://gateway.marvel.com/v1/public";var Nt=u(520);let U=(()=>{class i{constructor(t){this.http=t}getCharacters(t){return this.http.get(`${Z}/characters`,{params:Object.assign(Object.assign({},this.getAuthParams()),this.processParams(t))})}getCharacter(t){return this.http.get(`${Z}/characters/${t}`,{params:Object.assign({},this.getAuthParams())})}getComics(t,s){return this.http.get(`${Z}/characters/${t}/comics`,{params:Object.assign(Object.assign({},this.getAuthParams()),this.processParams(s))})}getStories(t,s){return this.http.get(`${Z}/characters/${t}/stories`,{params:Object.assign(Object.assign({},this.getAuthParams()),this.processParams(s))})}getEvents(t,s){return this.http.get(`${Z}/characters/${t}/events`,{params:Object.assign(Object.assign({},this.getAuthParams()),this.processParams(s))})}getSeries(t,s){return this.http.get(`${Z}/characters/${t}/series`,{params:Object.assign(Object.assign({},this.getAuthParams()),this.processParams(s))})}getAuthParams(){return{ts:"1",apikey:"2640683be73eca0f74efa9274a6059d7",hash:"4800ef0902736d1b8ec875e409e093a1"}}processParams(t){if(!t)return t;let s={};return Object.keys(t).forEach(r=>{void 0!==t[r]&&(s[r]=t[r])}),s}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Nt.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class M{constructor(n,t,s){this.actions=n,this.store=t,this.marvelApiService=s,this.characters=this.actions.pipe((0,C.l4)(W),(0,O.w)(r=>this.store.select(V).pipe((0,F.P)(),(0,O.w)(c=>{var a,m;const f=r.offset||0,v=r.limit||(null===(a=this.cache)||void 0===a?void 0:a.length);return((null===(m=this.cache)||void 0===m?void 0:m.slice(f,f+v).filter(Boolean))||[]).length===v?(0,g.of)($({summary:this.summary,single:c.single})):this.getCharacters(r.offset,r.limit).pipe((0,h.U)(d=>{this.cache=this.cache?[...this.cache]:new Array(d.total);for(let p=0;p<d.count;p++)this.cache[d.offset+p]=d.results[p];return this.summary=this.cache.filter(Boolean),$({summary:this.cache.filter(Boolean),single:c.single})}),(0,x.K)(d=>(console.error(d),(0,g.of)(Q({error:d})))))})))),this.character=this.actions.pipe((0,C.l4)(tt),(0,O.w)(r=>this.store.select(V).pipe((0,F.P)(),(0,O.w)(c=>{var a,m;const f=(null===(a=c.single)||void 0===a?void 0:a.find(v=>v.id===r.id))||(null===(m=c.summary)||void 0===m?void 0:m.find(v=>v.id===r.id));if(f){const v=[...c.single||[],f];return(0,g.of)($({summary:this.summary,single:v}))}return this.getCharacter(r.id).pipe((0,h.U)(v=>{const l=[...c.single||[],...v.results];return $({summary:this.summary,single:l})}),(0,x.K)(v=>(console.error(v),(0,g.of)(Q({error:v})))))}))))}getCharacters(n,t){return this.marvelApiService.getCharacters({offset:n,limit:t}).pipe((0,h.U)(s=>s.data))}getCharacter(n){return this.marvelApiService.getCharacter(n).pipe((0,h.U)(t=>t.data))}}M.\u0275fac=function(n){return new(n||M)(e.LFG(C.eX),e.LFG(o.yh),e.LFG(U))},M.\u0275prov=e.Yz7({token:M,factory:M.\u0275fac}),(0,A.gn)([(0,C.Qm)()],M.prototype,"characters",void 0),(0,A.gn)([(0,C.Qm)()],M.prototype,"character",void 0);const lt=(0,o.P1)(i=>i[b],i=>i.comics);class L{constructor(n,t,s){this.actions=n,this.store=t,this.marvelApiService=s,this.comics=this.actions.pipe((0,C.l4)(it),(0,O.w)(r=>this.store.select(lt).pipe((0,F.P)(),(0,O.w)(c=>{const a=this.cache&&this.cache[r.id]||[],m=r.offset||0,f=r.limit||a.length;return((null==a?void 0:a.slice(m,m+f).filter(Boolean))||[]).length===f?(0,g.of)(R({summary:this.summary})):this.getComics(r.id,r.offset,r.limit).pipe((0,h.U)(l=>{const d=this.cache&&this.cache[r.id]||new Array(l.total);for(let p=0;p<l.count;p++)d[l.offset+p]=l.results[p];return this.summary=Object.assign(Object.assign({},this.summary),{[r.id]:d.filter(Boolean)}),R({summary:this.summary})}),(0,x.K)(l=>(console.error(l),(0,g.of)(et({error:l})))))}))))}getComics(n,t,s){return this.marvelApiService.getComics(n,{offset:t,limit:s}).pipe((0,h.U)(r=>r.data))}}L.\u0275fac=function(n){return new(n||L)(e.LFG(C.eX),e.LFG(o.yh),e.LFG(U))},L.\u0275prov=e.Yz7({token:L,factory:L.\u0275fac}),(0,A.gn)([(0,C.Qm)()],L.prototype,"comics",void 0);const ht=(0,o.P1)(i=>i[b],i=>i.events);class y{constructor(n,t,s){this.actions=n,this.store=t,this.marvelApiService=s,this.events=this.actions.pipe((0,C.l4)(st),(0,O.w)(r=>this.store.select(ht).pipe((0,F.P)(),(0,O.w)(c=>{const a=this.cache&&this.cache[r.id]||[],m=r.offset||0,f=r.limit||a.length;return((null==a?void 0:a.slice(m,m+f).filter(Boolean))||[]).length===f?(0,g.of)(z({summary:this.summary})):this.getEvents(r.id,r.offset,r.limit).pipe((0,h.U)(l=>{const d=this.cache&&this.cache[r.id]||new Array(l.total);for(let p=0;p<l.count;p++)d[l.offset+p]=l.results[p];return this.summary=Object.assign(Object.assign({},c.summary),{[r.id]:d.filter(Boolean)}),z({summary:this.summary})}),(0,x.K)(l=>(console.error(l),(0,g.of)(nt({error:l})))))}))))}getEvents(n,t,s){return this.marvelApiService.getEvents(n,{offset:t,limit:s}).pipe((0,h.U)(r=>r.data))}}y.\u0275fac=function(n){return new(n||y)(e.LFG(C.eX),e.LFG(o.yh),e.LFG(U))},y.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac}),(0,A.gn)([(0,C.Qm)()],y.prototype,"events",void 0);const mt=(0,o.P1)(i=>i[b],i=>i.stories);class w{constructor(n,t,s){this.actions=n,this.store=t,this.marvelApiService=s,this.stories=this.actions.pipe((0,C.l4)(at),(0,O.w)(r=>this.store.select(mt).pipe((0,F.P)(),(0,O.w)(c=>{const a=this.cache&&this.cache[r.id]||[],m=r.offset||0,f=r.limit||a.length;return((null==a?void 0:a.slice(m,m+f).filter(Boolean))||[]).length===f?(0,g.of)(q({summary:this.summary})):this.getStories(r.id,r.offset,r.limit).pipe((0,h.U)(l=>{const d=this.cache&&this.cache[r.id]||new Array(l.total);for(let p=0;p<l.count;p++)d[l.offset+p]=l.results[p];return this.summary=Object.assign(Object.assign({},c.summary),{[r.id]:d.filter(Boolean)}),q({summary:this.summary})}),(0,x.K)(l=>(console.error(l),(0,g.of)(ct({error:l})))))}))))}getStories(n,t,s){return this.marvelApiService.getStories(n,{offset:t,limit:s}).pipe((0,h.U)(r=>r.data))}}w.\u0275fac=function(n){return new(n||w)(e.LFG(C.eX),e.LFG(o.yh),e.LFG(U))},w.\u0275prov=e.Yz7({token:w,factory:w.\u0275fac}),(0,A.gn)([(0,C.Qm)()],w.prototype,"stories",void 0);const ut=(0,o.P1)(i=>i[b],i=>i.series);class T{constructor(n,t,s){this.actions=n,this.store=t,this.marvelApiService=s,this.series=this.actions.pipe((0,C.l4)(ot),(0,O.w)(r=>this.store.select(ut).pipe((0,F.P)(),(0,O.w)(c=>{const a=this.cache&&this.cache[r.id]||[],m=r.offset||0,f=r.limit||a.length;return((null==a?void 0:a.slice(m,m+f).filter(Boolean))||[]).length===f?(0,g.of)(G({summary:this.summary})):this.getSeries(r.id,r.offset,r.limit).pipe((0,h.U)(l=>{const d=this.cache&&this.cache[r.id]||new Array(l.total);for(let p=0;p<l.count;p++)d[l.offset+p]=l.results[p];return this.summary=Object.assign(Object.assign({},c.summary),{[r.id]:d.filter(Boolean)}),G({summary:this.summary})}),(0,x.K)(l=>(console.error(l),(0,g.of)(rt({error:l})))))}))))}getSeries(n,t,s){return this.marvelApiService.getSeries(n,{offset:t,limit:s}).pipe((0,h.U)(r=>r.data))}}T.\u0275fac=function(n){return new(n||T)(e.LFG(C.eX),e.LFG(o.yh),e.LFG(U))},T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac}),(0,A.gn)([(0,C.Qm)()],T.prototype,"series",void 0);let jt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[C.sQ.forFeature([M,L,y,w,T]),o.Aw.forFeature(b,It)]]}),i})();var _=u(9808),P=u(9300);function E(i,n){const t=[],s=Math.ceil(i.length/n.cellsCount);for(let r=0;r<s;r++){const c=n.cellsCount*r,a=i.slice(c,c+n.cellsCount),m=new Array(n.cellsCount);Object.assign(m,a),t[r]=m}return t}let X=(()=>{class i{constructor(t){this.store=t}getCharacter(t){return this.store.dispatch(tt({id:t})),this.getStoreCharacter(t).pipe((0,h.U)(s=>this.convertToCharacter(s)))}getCharactersNext(t,s){let r=[];return s.pipe((0,O.w)(()=>(this.store.dispatch(W({offset:r.length,limit:3*t.cellsCount})),this.getStoreCharacters().pipe((0,h.U)(c=>(r=c,E(this.convertToCharacters(c),t))),(0,x.K)(c=>(console.error(c),(0,g.of)(E(this.convertToCharacters(r),t))))))))}getStoreCharacter(t){return this.getStoreCharactersState().pipe((0,h.U)(s=>{var r;return null===(r=s.single)||void 0===r?void 0:r.find(c=>c.id===t)}),(0,P.h)(s=>!!s))}getStoreCharacters(){return this.getStoreCharactersState().pipe((0,h.U)(t=>t.summary),(0,P.h)(t=>!!t))}getStoreCharactersState(){return this.store.select(V).pipe((0,P.h)(t=>"pending"!==t.state),(0,h.U)(t=>{if("error"===t.state)throw t.error;return t}))}convertToCharacters(t){return t.map(s=>this.convertToCharacter(s))}convertToCharacter(t){return{id:t.id,name:t.name,description:t.description,thumbnail:{extension:t.thumbnail.extension,path:t.thumbnail.path},comics:t.comics,events:t.events,series:t.series,stories:t.stories}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(o.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),I=(()=>{class i{get isPortrait(){return document.body.clientWidth/window.innerHeight<1}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),dt=(()=>{class i{constructor(t){this.store=t}getCharacterComicsNext(t,s,r){let c=[];return r.pipe((0,O.w)(()=>(this.store.dispatch(it({offset:c.length,limit:3*s.cellsCount,id:t})),this.getStoreComics(t).pipe((0,h.U)(a=>(c=a,E(this.convertToComics(a),s)))))))}getStoreComics(t){return this.getStoreComicsState().pipe((0,h.U)(s=>s.summary[t]),(0,P.h)(s=>!!s))}getStoreComicsState(){return this.store.select(lt).pipe((0,P.h)(t=>"pending"!==t.state),(0,h.U)(t=>{if("error"===t.state)throw t.error;return t}))}convertToComics(t){return t.map(s=>({id:s.id,title:s.title,description:s.description,thumbnail:s.thumbnail}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(o.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),pt=(()=>{class i{constructor(t){this.store=t}getCharacterEventsNext(t,s,r){let c=[];return r.pipe((0,O.w)(()=>(this.store.dispatch(st({offset:c.length,limit:3*s.cellsCount,id:t})),this.getStoreEvents(t).pipe((0,h.U)(a=>(c=a,E(this.convertToEvent(a),s)))))))}getStoreEvents(t){return this.getStoreEventsState().pipe((0,h.U)(s=>s.summary[t]),(0,P.h)(s=>!!s))}getStoreEventsState(){return this.store.select(ht).pipe((0,P.h)(t=>"pending"!==t.state),(0,h.U)(t=>{if("error"===t.state)throw t.error;return t}))}convertToEvent(t){return t.map(s=>({id:s.id,title:s.title,description:s.description,thumbnail:s.thumbnail}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(o.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),gt=(()=>{class i{constructor(t){this.store=t}getCharacterStoriesNext(t,s,r){let c=[];return r.pipe((0,O.w)(()=>(this.store.dispatch(at({offset:c.length,limit:3*s.cellsCount,id:t})),this.getStoreStories(t).pipe((0,h.U)(a=>(c=a,E(this.convertToStory(a),s)))))))}getStoreStories(t){return this.getStoreStoriesState().pipe((0,h.U)(s=>s.summary[t]),(0,P.h)(s=>!!s))}getStoreStoriesState(){return this.store.select(mt).pipe((0,P.h)(t=>"pending"!==t.state),(0,h.U)(t=>{if("error"===t.state)throw t.error;return t}))}convertToStory(t){return t.map(s=>({id:s.id,title:s.title,description:s.description,thumbnail:s.thumbnail}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(o.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),ft=(()=>{class i{constructor(t){this.store=t}getCharacterSeriesNext(t,s,r){let c=[];return r.pipe((0,O.w)(()=>(this.store.dispatch(ot({offset:c.length,limit:3*s.cellsCount,id:t})),this.getStoreSeries(t).pipe((0,h.U)(a=>(c=a,E(this.convertToSeries(a),s)))))))}getStoreSeries(t){return this.getStoreSeriesState().pipe((0,h.U)(s=>s.summary[t]),(0,P.h)(s=>!!s))}getStoreSeriesState(){return this.store.select(ut).pipe((0,P.h)(t=>"pending"!==t.state),(0,h.U)(t=>{if("error"===t.state)throw t.error;return t}))}convertToSeries(t){return t.map(s=>({id:s.id,title:s.title,description:s.description,thumbnail:s.thumbnail}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(o.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Jt=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-character-board"]],decls:1,vars:0,template:function(t,s){1&t&&e._UZ(0,"router-outlet")},directives:[S.lC],styles:[""],changeDetection:0}),i})();var vt=u(7579),Qt=u(1135),Ht=u(4408);const _t=new(u(640).v)(Ht.o),Kt=_t;var zt=u(8306),kt=u(3532);var Vt=u(4482),Xt=u(5403),Dt=u(8421),Wt=u(5032);class Y{constructor(n,t){this.cellsCount=n,this.rowsCount=t,this.cellWidth=`${Math.floor(100/this.cellsCount)}%`}}function ee(i,n){if(1&i&&(e.TgZ(0,"div",5)(1,"p"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.model?null:t.model.description)}}let ie=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-character-list-item"]],inputs:{model:"model"},decls:7,vars:3,consts:[[1,"container"],[1,"item","image"],["onerror","this.onerror=null; this.src='assets/img/default-character.jpeg'",3,"src"],[1,"item","text","name"],["class","item text description",4,"ngIf"],[1,"item","text","description"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"p"),e._uU(5),e.qZA()(),e.YNc(6,ee,3,1,"div",4),e.qZA()),2&t&&(e.xp6(2),e.Q6J("src",(null==s.model||null==s.model.thumbnail?null:s.model.thumbnail.path)+"/standard_fantastic."+(null==s.model||null==s.model.thumbnail?null:s.model.thumbnail.extension),e.LSH),e.xp6(3),e.Oqu(null==s.model?null:s.model.name),e.xp6(1),e.Q6J("ngIf",null==s.model?null:s.model.description))},directives:[_.O5],styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;align-items:stretch}[_nghost-%COMP%]   .item[_ngcontent-%COMP%]{color:#fff;display:flex}[_nghost-%COMP%]   .item.text[_ngcontent-%COMP%]{text-align:left;padding:0 16px;-webkit-box-orient:vertical;display:-webkit-box;text-overflow:ellipsis;-webkit-line-clamp:4}[_nghost-%COMP%]   .item.name[_ngcontent-%COMP%]{font-size:initial;min-height:7%}[_nghost-%COMP%]   .item.description[_ngcontent-%COMP%]{font-size:small;min-height:30%}[_nghost-%COMP%]   .item.image[_ngcontent-%COMP%]{height:60%;padding:8px}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;align-self:start}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{width:100%;object-fit:cover;object-position:top}"],changeDetection:0}),i})();const ne=["list"];function se(i,n){if(1&i&&e._UZ(0,"marvel-character-list-item",12),2&i){const t=e.oxw().$implicit;e.Q6J("model",t)}}function re(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(3).click(c.id)}),e.YNc(1,se,1,1,"marvel-character-list-item",11),e.qZA()}if(2&i){const t=n.$implicit,s=e.oxw(3);e.Udp("width",s.dimensions.cellWidth),e.xp6(1),e.Q6J("ngIf",t)}}function oe(i,n){if(1&i&&(e.TgZ(0,"div",8),e.YNc(1,re,2,3,"div",9),e.qZA()),2&i){const t=n.$implicit;e.Udp("max-height","1000px"),e.xp6(1),e.Q6J("ngForOf",t)}}function ce(i,n){if(1&i&&(e.TgZ(0,"div",5,6),e.YNc(2,oe,2,3,"div",7),e.qZA()),2&i){const t=n.ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}let ae=(()=>{class i{constructor(t,s,r,c){this.router=t,this.route=s,this.characterListService=r,this.viewportInfoService=c,this.destroy$=new vt.x,this.loadNextCharacters$=new Qt.X(void 0);const a=c.isPortrait;this.dimensions=new Y(a?1:4,a?2:1),this.model$=this.characterListService.getCharactersNext(this.dimensions,this.loadNextCharacters$).pipe((0,x.K)(m=>(console.error(m),(0,g.of)([])))),function qt(i=0,n=_t){return i<0&&(i=0),function Bt(i=0,n,t=Kt){let s=-1;return null!=n&&((0,kt.K)(n)?t=n:s=n),new zt.y(r=>{let c=function Gt(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;c<0&&(c=0);let a=0;return t.schedule(function(){r.closed||(r.next(a++),0<=s?this.schedule(void 0,s):r.complete())},c)})}(i,i,n)}(0).pipe(function te(i){return(0,Vt.e)((n,t)=>{(0,Dt.Xf)(i).subscribe((0,Xt.x)(t,()=>t.complete(),Wt.Z)),!t.closed&&n.subscribe(t)})}(this.destroy$),(0,h.U)(()=>{var m,f;if(!(null===(m=this.list)||void 0===m?void 0:m.nativeElement))return;const v=null===(f=this.list)||void 0===f?void 0:f.nativeElement,d=v.scrollHeight-v.clientHeight-v.scrollTop<100;d&&!this.endScroll&&(this.endScroll=d,this.loadNextCharacters$.next()),d||(this.endScroll=d)})).subscribe()}ngOnDestroy(){this.destroy$.next()}click(t){this.router.navigate(["character",t],{relativeTo:this.route.parent})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.F0),e.Y36(S.gz),e.Y36(X),e.Y36(I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-character-list"]],viewQuery:function(t,s){if(1&t&&e.Gf(ne,5,e.SBq),2&t){let r;e.iGM(r=e.CRH())&&(s.list=r.first)}},decls:8,vars:3,consts:[[1,"header"],[1,"about"],[1,"item","text","name"],["href","https://developer.marvel.com"],["class","list",4,"ngIf"],[1,"list"],["list",""],["class","row",3,"max-height",4,"ngFor","ngForOf"],[1,"row"],["class","cell",3,"width","click",4,"ngFor","ngForOf"],[1,"cell",3,"click"],[3,"model",4,"ngIf"],[3,"model"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"The Marvel Api Test Application"),e.qZA(),e.TgZ(4,"a",3),e._uU(5,"developer.marvel.com"),e.qZA()()(),e.YNc(6,ce,3,1,"div",4),e.ALo(7,"async")),2&t&&(e.xp6(6),e.Q6J("ngIf",e.lcZ(7,1,s.model$)))},directives:[_.O5,_.sg,ie],pipes:[_.Ov],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{color:#fff;margin:12px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:link, [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:visited, [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:active{color:#fff}[_nghost-%COMP%]   .list[_ngcontent-%COMP%]{margin:1px;overflow:auto}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{border:1px solid lightgreen}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px}"],changeDetection:0}),i})();var N=u(515);function le(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"p"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().ngIf;e.xp6(2),e.Oqu(null==t?null:t.description)}}function he(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).changeList("stories")}),e._uU(1,"Stories"),e.qZA()}if(2&i){const t=e.oxw(2);e.ekj("selected","stories"===t.tab)}}function me(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).changeList("events")}),e._uU(1,"Events"),e.qZA()}if(2&i){const t=e.oxw(2);e.ekj("selected","events"===t.tab)}}function ue(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).changeList("series")}),e._uU(1,"Series"),e.qZA()}if(2&i){const t=e.oxw(2);e.ekj("selected","series"===t.tab)}}function de(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"img",2),e.NdJ("click",function(){return e.CHM(t),e.oxw().home()}),e.qZA(),e.TgZ(2,"div",3),e._UZ(3,"img",4),e.TgZ(4,"div",5)(5,"h1",6),e._uU(6),e.qZA(),e.YNc(7,le,3,1,"div",7),e.TgZ(8,"div",8)(9,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeList("comics")}),e._uU(10,"Comics"),e.qZA(),e.YNc(11,he,2,2,"button",10),e.YNc(12,me,2,2,"button",10),e.YNc(13,ue,2,2,"button",10),e.qZA()()(),e.TgZ(14,"div",11),e._UZ(15,"router-outlet"),e.qZA()()}if(2&i){const t=n.ngIf,s=e.oxw();e.xp6(3),e.Q6J("src",(null==t||null==t.thumbnail?null:t.thumbnail.path)+"/standard_medium."+(null==t||null==t.thumbnail?null:t.thumbnail.extension),e.LSH),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",null==t?null:t.description),e.xp6(2),e.ekj("selected","comics"===s.tab),e.xp6(2),e.Q6J("ngIf",null==t||null==t.stories||null==t.stories.items?null:t.stories.items.length),e.xp6(1),e.Q6J("ngIf",null==t||null==t.events||null==t.events.items?null:t.events.items.length),e.xp6(1),e.Q6J("ngIf",null==t||null==t.series||null==t.series.items?null:t.series.items.length)}}let pe=(()=>{class i{constructor(t,s,r){this.route=t,this.router=s,this.characterListService=r,this.model$=N.E,this.destroy$=new vt.x}get tab(){var t,s;return null===(s=null===(t=this.route.firstChild)||void 0===t?void 0:t.snapshot)||void 0===s?void 0:s.url[0].path}ngOnInit(){this.id=+this.route.snapshot.paramMap.get("id"),this.model$=this.characterListService.getCharacter(this.id)}ngOnDestroy(){this.destroy$.next()}changeList(t){return this.router.navigate([t],{relativeTo:this.route})}home(){return this.router.navigate([""])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.gz),e.Y36(S.F0),e.Y36(X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-character"]],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],["src","assets/img/home-icon.jpeg",1,"item","home",3,"click"],[1,"header"],["onerror","this.onerror=null; this.src='assets/img/default-character.jpeg'",1,"item",3,"src"],[1,"about"],[1,"item","text","name"],["class","item text description",4,"ngIf"],[1,"buttons"],[1,"button",3,"click"],["class","button",3,"selected","click",4,"ngIf"],[1,"list"],[1,"item","text","description"]],template:function(t,s){1&t&&(e.YNc(0,de,16,8,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,s.model$))},directives:[_.O5,S.lC],pipes:[_.Ov],styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{color:#fff;display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:12px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:8px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-top:0;margin-bottom:auto}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:small;width:100%}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{align-self:start;height:60%;object-fit:cover;object-position:top}[_nghost-%COMP%]   .home[_ngcontent-%COMP%]{width:25px;height:25px;top:0;right:0;position:absolute;margin:8px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:1px solid lightgreen}[_nghost-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff;padding:8px;text-align:center;border-radius:12px;box-shadow:0 0 3px gray;margin-right:8px}[_nghost-%COMP%]   .list[_ngcontent-%COMP%]{overflow:auto;flex-grow:1}"],changeDetection:0}),i})();function ge(i,n){if(1&i&&(e.TgZ(0,"div",5),e._UZ(1,"div",6),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("innerHTML",null==t.model?null:t.model.description,e.oJD)}}let J=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-comics-list-item"]],inputs:{model:"model"},decls:7,vars:3,consts:[[1,"container"],[1,"item","image"],["onerror","this.onerror=null; this.src='assets/img/default-comics.jpeg'",3,"src"],[1,"item","text","title"],["class","item text description",4,"ngIf"],[1,"item","text","description"],[3,"innerHTML"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"p"),e._uU(5),e.qZA()(),e.YNc(6,ge,2,1,"div",4),e.qZA()),2&t&&(e.xp6(2),e.Q6J("src",(null==s.model||null==s.model.thumbnail?null:s.model.thumbnail.path)+"/landscape_xlarge."+(null==s.model||null==s.model.thumbnail?null:s.model.thumbnail.extension),e.LSH),e.xp6(3),e.Oqu(null==s.model?null:s.model.title),e.xp6(1),e.Q6J("ngIf",null==s.model?null:s.model.description))},directives:[_.O5],styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;align-items:stretch}[_nghost-%COMP%]   .item[_ngcontent-%COMP%]{color:#fff;display:flex}[_nghost-%COMP%]   .item.text[_ngcontent-%COMP%]{text-align:left;padding:0 16px;-webkit-box-orient:vertical;display:-webkit-box;text-overflow:ellipsis;-webkit-line-clamp:4}[_nghost-%COMP%]   .item.title[_ngcontent-%COMP%]{font-size:initial;min-height:7%}[_nghost-%COMP%]   .item.description[_ngcontent-%COMP%]{font-size:small;min-height:70%}[_nghost-%COMP%]   .item.image[_ngcontent-%COMP%]{height:60%;padding:8px}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;align-self:start}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{width:100%;object-fit:cover;object-position:top}"],changeDetection:0}),i})();function fe(i,n){if(1&i&&e._UZ(0,"marvel-comics-list-item",8),2&i){const t=e.oxw().$implicit;e.Q6J("model",t)}}function ve(i,n){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,fe,1,1,"marvel-comics-list-item",7),e.qZA()),2&i){const t=n.$implicit,s=e.oxw(3);e.Udp("width",s.dimensions.cellWidth),e.xp6(1),e.Q6J("ngIf",t)}}function _e(i,n){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,ve,2,3,"div",5),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Ce(i,n){if(1&i&&(e.TgZ(0,"div",1,2),e.YNc(2,_e,2,1,"div",3),e.qZA()),2&i){const t=n.ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}function xe(i,n){if(1&i&&e._UZ(0,"marvel-comics-list-item",8),2&i){const t=e.oxw().$implicit;e.Q6J("model",t)}}function Se(i,n){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,xe,1,1,"marvel-comics-list-item",7),e.qZA()),2&i){const t=n.$implicit,s=e.oxw(3);e.Udp("width",s.dimensions.cellWidth),e.xp6(1),e.Q6J("ngIf",t)}}function Pe(i,n){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,Se,2,3,"div",5),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Me(i,n){if(1&i&&(e.TgZ(0,"div",1,2),e.YNc(2,Pe,2,1,"div",3),e.qZA()),2&i){const t=n.ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}function ye(i,n){if(1&i&&e._UZ(0,"marvel-comics-list-item",8),2&i){const t=e.oxw().$implicit;e.Q6J("model",t)}}function we(i,n){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,ye,1,1,"marvel-comics-list-item",7),e.qZA()),2&i){const t=n.$implicit,s=e.oxw(3);e.Udp("width",s.dimensions.cellWidth),e.xp6(1),e.Q6J("ngIf",t)}}function Te(i,n){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,we,2,3,"div",5),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function be(i,n){if(1&i&&(e.TgZ(0,"div",1,2),e.YNc(2,Te,2,1,"div",3),e.qZA()),2&i){const t=n.ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}function Fe(i,n){if(1&i&&e._UZ(0,"marvel-comics-list-item",8),2&i){const t=e.oxw().$implicit;e.Q6J("model",t)}}function Ze(i,n){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,Fe,1,1,"marvel-comics-list-item",7),e.qZA()),2&i){const t=n.$implicit,s=e.oxw(3);e.Udp("width",s.dimensions.cellWidth),e.xp6(1),e.Q6J("ngIf",t)}}function Ee(i,n){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,Ze,2,3,"div",5),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Ie(i,n){if(1&i&&(e.TgZ(0,"div",1,2),e.YNc(2,Ee,2,1,"div",3),e.qZA()),2&i){const t=n.ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}const $e=[{path:"",component:Jt,children:[{path:"character-list",component:ae},{path:"character/:id",component:pe,children:[{path:"comics",component:(()=>{class i{constructor(t,s,r){var c;this.viewportInfoService=t,this.comicsListService=s,this.activatedRoute=r,this.model$=N.E;const a=t.isPortrait;this.dimensions=new Y(a?1:4,a?2:1),this.characterId=+(null===(c=this.activatedRoute.parent)||void 0===c?void 0:c.snapshot.paramMap.get("id"))}ngOnInit(){this.model$=this.comicsListService.getCharacterComicsNext(this.characterId,this.dimensions,(0,g.of)(void 0)).pipe((0,x.K)(t=>(console.error(t),(0,g.of)([]))))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I),e.Y36(dt),e.Y36(S.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-comics-list"]],decls:2,vars:3,consts:[["class","list",4,"ngIf"],[1,"list"],["list",""],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","cell",3,"width",4,"ngFor","ngForOf"],[1,"cell"],[3,"model",4,"ngIf"],[3,"model"]],template:function(t,s){1&t&&(e.YNc(0,Ce,3,1,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,s.model$))},directives:[_.O5,_.sg,J],pipes:[_.Ov],styles:["[_nghost-%COMP%]   .list[_ngcontent-%COMP%]{margin:1px}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px}"]}),i})()},{path:"events",component:(()=>{class i{constructor(t,s,r){var c;this.viewportInfoService=t,this.eventsListService=s,this.activatedRoute=r,this.model$=N.E;const a=t.isPortrait;this.dimensions=new Y(a?1:4,a?2:1),this.characterId=+(null===(c=this.activatedRoute.parent)||void 0===c?void 0:c.snapshot.paramMap.get("id"))}ngOnInit(){this.model$=this.eventsListService.getCharacterEventsNext(this.characterId,this.dimensions,(0,g.of)(void 0)).pipe((0,x.K)(t=>(console.error(t),(0,g.of)([]))))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I),e.Y36(pt),e.Y36(S.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-events-list"]],decls:2,vars:3,consts:[["class","list",4,"ngIf"],[1,"list"],["list",""],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","cell",3,"width",4,"ngFor","ngForOf"],[1,"cell"],[3,"model",4,"ngIf"],[3,"model"]],template:function(t,s){1&t&&(e.YNc(0,Me,3,1,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,s.model$))},directives:[_.O5,_.sg,J],pipes:[_.Ov],styles:["[_nghost-%COMP%]   .list[_ngcontent-%COMP%]{margin:1px}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px}"]}),i})()},{path:"series",component:(()=>{class i{constructor(t,s,r){var c;this.viewportInfoService=t,this.seriesListService=s,this.activatedRoute=r,this.model$=N.E;const a=t.isPortrait;this.dimensions=new Y(a?1:4,a?2:1),this.characterId=+(null===(c=this.activatedRoute.parent)||void 0===c?void 0:c.snapshot.paramMap.get("id"))}ngOnInit(){this.model$=this.seriesListService.getCharacterSeriesNext(this.characterId,this.dimensions,(0,g.of)(void 0)).pipe((0,x.K)(t=>(console.error(t),(0,g.of)([]))))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I),e.Y36(ft),e.Y36(S.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-series-list"]],decls:2,vars:3,consts:[["class","list",4,"ngIf"],[1,"list"],["list",""],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","cell",3,"width",4,"ngFor","ngForOf"],[1,"cell"],[3,"model",4,"ngIf"],[3,"model"]],template:function(t,s){1&t&&(e.YNc(0,be,3,1,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,s.model$))},directives:[_.O5,_.sg,J],pipes:[_.Ov],styles:["[_nghost-%COMP%]   .list[_ngcontent-%COMP%]{margin:1px}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px}"]}),i})()},{path:"stories",component:(()=>{class i{constructor(t,s,r){var c;this.viewportInfoService=t,this.storiesListService=s,this.activatedRoute=r,this.model$=N.E;const a=t.isPortrait;this.dimensions=new Y(a?1:4,a?2:1),this.characterId=+(null===(c=this.activatedRoute.parent)||void 0===c?void 0:c.snapshot.paramMap.get("id"))}ngOnInit(){this.model$=this.storiesListService.getCharacterStoriesNext(this.characterId,this.dimensions,(0,g.of)(void 0)).pipe((0,x.K)(t=>(console.error(t),(0,g.of)([]))))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I),e.Y36(gt),e.Y36(S.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["marvel-stories-list"]],decls:2,vars:3,consts:[["class","list",4,"ngIf"],[1,"list"],["list",""],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","cell",3,"width",4,"ngFor","ngForOf"],[1,"cell"],[3,"model",4,"ngIf"],[3,"model"]],template:function(t,s){1&t&&(e.YNc(0,Ie,3,1,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,s.model$))},directives:[_.O5,_.sg,J],pipes:[_.Ov],styles:["[_nghost-%COMP%]   .list[_ngcontent-%COMP%]{margin:1px}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px}"]}),i})()},{path:"**",pathMatch:"full",redirectTo:"comics"}]},{path:"**",pathMatch:"full",redirectTo:"character-list"}]}];let Ue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[X,I,dt,pt,gt,ft],imports:[[S.Bz.forChild($e),jt,_.ez]]}),i})()}}]);